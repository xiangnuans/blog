(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{511:function(s,e,n){"use strict";n.r(e);var t=n(2),a=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"项目开发中的规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目开发中的规范"}},[s._v("#")]),s._v(" 项目开发中的规范")]),s._v(" "),e("p",[s._v("形成良好统一的代码规范，有利于提高代码的可读性，减少潜在的错误，便于团队写作开发。本问简单介绍JS、CSS、Git Commit的规范工具和用法。")]),s._v(" "),e("h2",{attrs:{id:"lint-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lint-js"}},[s._v("#")]),s._v(" Lint JS")]),s._v(" "),e("p",[s._v("我们使用"),e("a",{attrs:{href:"https://github.com/eslint/eslint",target:"_blank",rel:"noopener noreferrer"}},[s._v("Eslint"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"_1-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装"}},[s._v("#")]),s._v(" 1. 安装")]),s._v(" "),e("p",[s._v("你可以全局安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install eslint -g\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("或者也可以在你的项目安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install eslint --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装完成后，可在命令行检查下你的代码是否否和规范。如果是全局安装则可以使用")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("eslint your-file\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置"}},[s._v("#")]),s._v(" 2. 配置")]),s._v(" "),e("p",[s._v("通过"),e("code",[s._v("eslint --init")]),s._v("命令可以生成一个配置文件。你也可以自己穿件"),e("code",[s._v(".eslintrc.*")]),s._v("文件，或者使用"),e("code",[s._v("eslint")]),s._v("命令检查你的代码时，它会从当前目录开始一层层向上查找是否存在"),e("code",[s._v(".eslintrc")]),s._v("文件，直到找到最近的一个"),e("code",[s._v(".eslintrc")]),s._v("文件，做诶此次检查的规则。")]),s._v(" "),e("p",[s._v("你可以在"),e("a",{attrs:{href:"https://github.com/eslint/eslint",target:"_blank",rel:"noopener noreferrer"}},[s._v("Eslint"),e("OutboundLink")],1),s._v("官网查看所有配置项")]),s._v(" "),e("p",[s._v("目前已经有很多大厂公开了他们的代码规范，也有很多相对应的Eslint插件，我们可以在"),e("code",[s._v(".eslintrc")]),s._v("中配置相对应的插件，这样就不用我们动手去添加一个个规则了。")]),s._v(" "),e("p",[s._v("以我们目前使用的"),e("code",[s._v("Airbnb")]),s._v("的代码规范为例，他提供了"),e("a",{attrs:{href:"https://www.npmjs.com/package/airbnb",target:"_blank",rel:"noopener noreferrer"}},[s._v("eslint-config-airbnb-base"),e("OutboundLink")],1),s._v("插件，因此我只需要在项目安装本插件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npx install-peerdeps --save-dev eslint-config-airbnb-base\nor\nnpm install --save-dev eslint-config-airbnb-base\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("并且在"),e("code",[s._v(".eslintrc")]),s._v("中配置上这个插件，大功告成！")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "extends": ["airbnb-base"]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("需要⚠️的一点是，如果你是使用全局命令"),e("code",[s._v("eslint")]),s._v("你的代码，在相应的"),e("code",[s._v(".eslintrc")]),s._v("中的"),e("code",[s._v("extends")]),s._v("，"),e("code",[s._v("plugins")]),s._v("都需要在全局安装。否则"),e("code",[s._v("eslint")]),s._v("会找不到相对应的插件。")]),s._v(" "),e("p",[s._v("最后，如果你还想对现有的"),e("code",[s._v("airbnb")]),s._v("或者现有其他规则进行配置，则可以在"),e("code",[s._v(".eslintrc")]),s._v("中的"),e("code",[s._v("rules")]),s._v("加上相应的配置。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "extends": ["airbnb-base"],\n  "rules": {\n    // 你的个性化配置\n        "rule-name": "" // 0-off, 1-warn, 2-error\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("还有一个比较例外的是可以使用以下方式，针对某些文件，重新修改相应规则：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"overrides": [\n    {\n      "files": ["*-test.js","*.spec.js"],\n      "rules": {\n        "no-unused-expressions": "off"\n      }\n    }\n  ]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"_3-禁用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-禁用"}},[s._v("#")]),s._v(" 3. 禁用")]),s._v(" "),e("p",[s._v("但是有些时候有些地方你可能真的需要禁用某些规则，"),e("code",[s._v("eslint")]),s._v("提供了几种禁用方式：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("/* eslint-disable [rules] */")]),s._v("：这行之后的所有代码禁用"),e("code",[s._v("eslint")]),s._v("规则。")]),s._v(" "),e("li",[e("code",[s._v("/* eslint-disable-line [rules] */")]),s._v("：这一行禁用"),e("code",[s._v("eslint")]),s._v("规则")]),s._v(" "),e("li",[e("code",[s._v("/* eslint-disable-next-line [rules] */")]),s._v("： 下一行禁用"),e("code",[s._v("eslint")]),s._v("规则。")])]),s._v(" "),e("p",[s._v("其中"),e("code",[s._v("[rules]")]),s._v("是可选的，如果没有"),e("code",[s._v("[rules]")]),s._v("则禁用所有规则，如果有"),e("code",[s._v("[rules]")]),s._v("则禁用指定规则")]),s._v(" "),e("p",[s._v("如 "),e("code",[s._v("/* eslint-disable */")]),s._v("则会禁用掉所有规则，"),e("code",[s._v("/* eslint-disable no-console*/")]),s._v(" 则只会禁用掉"),e("code",[s._v("no-console")]),s._v("这条规则。")]),s._v(" "),e("h2",{attrs:{id:"lint-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lint-css"}},[s._v("#")]),s._v(" Lint CSS")]),s._v(" "),e("p",[s._v("我选择了"),e("code",[s._v("StyleLint")]),s._v("来规范我的"),e("code",[s._v("CSS")]),s._v("。它可以说和"),e("code",[s._v("eslint")]),s._v("非常像了。")]),s._v(" "),e("h3",{attrs:{id:"_1-安装-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-2"}},[s._v("#")]),s._v(" 1. 安装")]),s._v(" "),e("p",[s._v("同样的，全局或者项目下安装"),e("code",[s._v("stylelint")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install stylelint -g\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装完成后，如果是全局安装则可以使用 "),e("code",[s._v("stylelint your-css-file")]),s._v(" 检查你的文件。如果是项目内安装则使用："),e("code",[s._v("./node_modules/.bin/stylelint your-css-file。")])]),s._v(" "),e("h3",{attrs:{id:"_2-配置-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-2"}},[s._v("#")]),s._v(" 2. 配置")]),s._v(" "),e("p",[s._v("可以通过三种方式对"),e("code",[s._v("stylelint")]),s._v("进行配置：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("package.json")]),s._v("中的"),e("code",[s._v("stylelint")]),s._v("属性")]),s._v(" "),e("li",[e("code",[s._v(".stylelintrc")]),s._v(" 文件")]),s._v(" "),e("li",[e("code",[s._v("stylelint.config.js")]),s._v("文件导出一个 JS 对象")])]),s._v(" "),e("p",[s._v("和 "),e("code",[s._v("ESLint")]),s._v("一样，我们可以在"),e("code",[s._v("extends")]),s._v("中指定第三方插件，"),e("code",[s._v("rules")]),s._v("来配置对应的规则。这里我们还是继续使用Airbnb CSS 规范。")]),s._v(" "),e("p",[s._v("安装"),e("a",{attrs:{href:"https://github.com/airbnb/css",target:"_blank",rel:"noopener noreferrer"}},[s._v("stylelint-config-airbnb"),e("OutboundLink")],1),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install stylelint-config-airbnb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在配置文件中声明：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{  "extends": "stylelint-config-airbnb"}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("注意，如果你的.stylelintrc文件是在根目录下，则extends的路径需要写成绝对路径，比如：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "extends": "/usr/local/lib/node_modules/stylelint-config-airbnb"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("最后，运行"),e("code",[s._v("stylelint your-css-file")]),s._v("就可以出现规范检查结果啦！"),e("code",[s._v("stylelint")]),s._v("默认会支持"),e("code",[s._v("css,scss,less")]),s._v("所以你也不用担心哦~")]),s._v(" "),e("h3",{attrs:{id:"禁用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用"}},[s._v("#")]),s._v(" 禁用")]),s._v(" "),e("p",[e("code",[s._v("stylelint")]),s._v(" 的规则也和 "),e("code",[s._v("ESLint")]),s._v("一样。所以如果熟悉了"),e("code",[s._v("ESLint")]),s._v("， "),e("code",[s._v("stylelint")]),s._v("真的可是说是无缝上手哦~")]),s._v(" "),e("h2",{attrs:{id:"lint-commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lint-commit"}},[s._v("#")]),s._v(" Lint Commit")]),s._v(" "),e("p",[s._v("在这一步我会进行两步操作：")]),s._v(" "),e("ul",[e("li",[s._v("检查前2步的ESLint，stylelint 是否全部通过；")]),s._v(" "),e("li",[s._v("提交的commit信息是否符合规范。")])]),s._v(" "),e("h2",{attrs:{id:"_1-使用githooks检查代码规范是否通过"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用githooks检查代码规范是否通过"}},[s._v("#")]),s._v(" 1. 使用"),e("code",[s._v("githooks")]),s._v("检查代码规范是否通过")]),s._v(" "),e("p",[s._v("我们使用"),e("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),e("OutboundLink")],1),s._v("来管理我们的"),e("code",[s._v("githooks")]),s._v("。在安装"),e("code",[s._v("husky")]),s._v("之前，请确保你的项目已经"),e("code",[s._v("git init")]),s._v("了。")]),s._v(" "),e("p",[s._v("安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("husky:npm install husky --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在"),e("code",[s._v("package.json")]),s._v("中定义我们需要的钩子及执行的命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    "scripts": {\n    "lint:es": "eslint", // lint js\n    "lint:css": "stylelint src/**/*.css", // lint css\n    "lint:all": "npm-run-all lint:es lint:css" // lint es, css\n  },\n  "husky": {\n    "hooks": {\n      "pre-commit": "npm run lint:all",\n    }\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("在这里我们分别定义了"),e("code",[s._v("lint:es")]),s._v("和"),e("code",[s._v("lint:css")]),s._v("两个命令来检测代码规范。你可以分别运行这两个命令。也可以定义一个命令同时运行这两个命令，我在这里使用了"),e("code",[s._v("npm-run-all")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install npm-run-all --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("我们定义了在"),e("code",[s._v("pre-commit")]),s._v("钩子触发时会执行"),e("code",[s._v("npm run lint:all")]),s._v("命令。"),e("code",[s._v("pre-commit")]),s._v("钩子会在"),e("code",[s._v("git commit")]),s._v("时触发，如果"),e("code",[s._v("lint:all")]),s._v("没有通过，则本次"),e("code",[s._v("commit")]),s._v("会失败。")]),s._v(" "),e("h3",{attrs:{id:"_2-使用commintlint检查-commit-信息是否符合规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用commintlint检查-commit-信息是否符合规范"}},[s._v("#")]),s._v(" 2.  使用"),e("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint",target:"_blank",rel:"noopener noreferrer"}},[s._v("commintlint"),e("OutboundLink")],1),s._v("检查 "),e("code",[s._v("commit")]),s._v(" 信息是否符合规范")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://commitlint.js.org/#/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("在这里，我们使用阮老师这篇文章中提到的 "),e("code",[s._v("git")]),s._v(" 提交规范， 大致是：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("其中，"),e("code",[s._v("type")]),s._v(" 可选项为：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("feat：新功能（feature）\nfix：修补bug\ndocs：文档（documentation）\nstyle： 格式（不影响代码运行的变动）\nrefactor：重构（即不是新增功能，也不是修改bug的代码变动）\ntest：增加测试\nchore：构建过程或辅助工具的变动\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("安装"),e("code",[s._v("commitlint")]),s._v("， 以及相对应的"),e("code",[s._v("commit")]),s._v("规范。和"),e("code",[s._v("eslint")]),s._v("一样，"),e("code",[s._v("commitlint")]),s._v("为我们提供检测功能，同时他也有不同的插件来对应不同的规范风格。你可以在这里查看大家分享出来的相应规范的配置。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install --save-dev @commitlint/{config-conventional,cli}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("生成配置文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("  echo \"module.exports = {extends: ['@commitlint/config-conventional']}\" > commitlint.config.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("它也支持多种文件格式的配置文件:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Configuration is picked up from\ncommitlint.config.js,\n.commitlintrc.js,\n.commitlintrc.json,\n or\n.commitlintrc.yml file\nor\na commitlint field in package.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("并且常用的配置项也与ESlint很相似：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  {\n      "extends": [\'@commitlint/config-conventional\'], // 扩展的规则集\n      "rules": {\n          // commitmsg 的自定义规则\n      }\n  }\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("这时候你就可以检查你要提交的commit信息是否符合规范了：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "foo" | npx commitlint\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("不过这样很鸡肋，我要先commit一次要提交的信息，通过了，再用这条消息提交一次。我们完全可以在githooks时来解决这个问题：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    "scripts": {\n        "commitmsg": "commitlint -e GIT_PARAMS"\n    },\n    "husky": {\n    "hooks": {\n      "pre-commit": "npm run lint:all",\n      "commit-msg": "npm run commitmsg"\n    }\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("在这里和"),e("code",[s._v("githooks")]),s._v("同时使用时需要加上"),e("code",[s._v("GIT_PARAMS")]),s._v("这个环境变量。我们在"),e("code",[s._v("commit-msg")]),s._v("这个钩子时调用"),e("code",[s._v("npm run commitmsg")]),s._v(" 来判断"),e("code",[s._v("commit")]),s._v("信息是否符合规范。")]),s._v(" "),e("h3",{attrs:{id:"_3-使用commitizen来填写commit-msg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用commitizen来填写commit-msg"}},[s._v("#")]),s._v(" 3. 使用"),e("a",{attrs:{href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"}},[s._v("commitizen"),e("OutboundLink")],1),s._v("来填写commit msg")]),s._v(" "),e("p",[s._v('安装commitizen及其adapater : npm install -g commitizen cz-conventional-changelog\n全局安装adapater: echo \'{ "path": "cz-conventional-changelog" }\' > ~/.czr\n安装完成后，使用 git cz 代替 git commit -m 来填写 commit msg，会出现一个交互式工具：')]),s._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://upload-images.jianshu.io/upload_images/9403248-7de090484949922a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",loading:"lazy"}})]),s._v(" "),e("p",[s._v("OK。完成以上三步之后我们的git 工作流变成了：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git add .\ngit cz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("然后就会检查我们的eslint, stylelint, commitlint。这样，当你提交成功时，你的JS, CSS , Commit Msg 也是完全符合规范的哦~")])])}),[],!1,null,null,null);e.default=a.exports}}]);