(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{503:function(e,t,r){"use strict";r.r(t);var s=r(2),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"orm框架选型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#orm框架选型"}},[e._v("#")]),e._v(" ORM框架选型")]),e._v(" "),t("p",[e._v("选型标准：实现O/R mapping，基于promise，支持原生SQL语句，支持连接池，支持事物，支持ES6/ES7")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("name")]),e._v(" "),t("th",[e._v("star")]),e._v(" "),t("th",[e._v("createtime")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("sequelize")]),e._v(" "),t("td",[e._v("19934")]),e._v(" "),t("td",[e._v("2010-07-18")])]),e._v(" "),t("tr",[t("td",[e._v("node-orm2")]),e._v(" "),t("td",[e._v("3001")]),e._v(" "),t("td",[e._v("2012-11-25")])]),e._v(" "),t("tr",[t("td",[e._v("typeorm")]),e._v(" "),t("td",[e._v("15230")]),e._v(" "),t("td",[e._v("2016-02-21")])]),e._v(" "),t("tr",[t("td",[e._v("bookshelf")]),e._v(" "),t("td",[e._v("5664")]),e._v(" "),t("td",[e._v("2013-03-10")])]),e._v(" "),t("tr",[t("td",[e._v("waterline")]),e._v(" "),t("td",[e._v("5099")]),e._v(" "),t("td",[e._v("2012-11-25")])]),e._v(" "),t("tr",[t("td",[e._v("knex")]),e._v(" "),t("td",[e._v("10539")]),e._v(" "),t("td",[e._v("2012-12-23")])]),e._v(" "),t("tr",[t("td",[e._v("node-orm2")]),e._v(" "),t("td",[e._v("3001")]),e._v(" "),t("td",[e._v("2013-08-03")])])])]),e._v(" "),t("p",[e._v("备注：以上数据截止2019.9.25\nnode-mysql与knex非ORM框架")]),e._v(" "),t("h2",{attrs:{id:"sequeize"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sequeize"}},[e._v("#")]),e._v(" sequeize")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/sequelize/sequelize",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/sequelize/sequelize"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("文档齐全，star最多。")]),e._v(" "),t("p",[e._v("支持数据库PostgreSQL、mysql、sqlite和sqlserver")]),e._v(" "),t("p",[e._v("特性：模型定义 模型同步、删除1：1 1:m  n:m关联")]),e._v(" "),t("p",[e._v("穿透模型promise\nhooks/callbacks/lifecycle\n支持原生SQL连接池 事务 迁移CLI")]),e._v(" "),t("h2",{attrs:{id:"node-orm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-orm2"}},[e._v("#")]),e._v(" node-orm2")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/dresende/node-orm2",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/dresende/node-orm2"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("支持数据库： mysql & mariadb\npostgresql\namazon\nsqlite\nmongodb(beta版)")]),e._v(" "),t("p",[e._v("特性： 创建模型、同步删除、批量新增】获取、查询、删除、统计、集合创建模型关联 定制有效性验证 模型实例缓存 通过插件支持分页、事务、mysql全文搜索、迁移。支持原生SQL语句。连接池，可通过pool参数设置。promise通过q-rom库实现。")]),e._v(" "),t("p",[e._v("项目近期更新少，与sequelize竞争完全处于劣势，放弃。")]),e._v(" "),t("h2",{attrs:{id:"bookshelf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bookshelf"}},[e._v("#")]),e._v(" bookshelf")]),e._v(" "),t("p",[e._v("[https://github.com/tgriesser/bookshelf]\n(https://github.com/tgriesser/bookshelf)")]),e._v(" "),t("p",[e._v("bookshelf是基于knex的ORM框架")]),e._v(" "),t("p",[e._v("支持数据库： mysql & mariadb & postgresql & sqlite3 和 Oracle")]),e._v(" "),t("p",[e._v("特性：事务 连接池 流式查询 promise和callback API")]),e._v(" "),t("p",[e._v("原生SQL语句")]),e._v(" "),t("h2",{attrs:{id:"waterline"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#waterline"}},[e._v("#")]),e._v(" waterline")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/balderdashy/waterline",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/balderdashy/waterline"),t("OutboundLink")],1),e._v("\nwaterline是从Salis框架衍生出来的ORM框架")]),e._v(" "),t("p",[e._v("支持数据库： mysql、mongo、PostgreSQL、redis等")]),e._v(" "),t("p",[e._v("文档包含在sail文档中")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://sailsjs.com/documentation/reference/waterline-orm",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://sailsjs.com/documentation/reference/waterline-orm"),t("OutboundLink")],1),e._v(" 文档不完善，放弃。")]),e._v(" "),t("h2",{attrs:{id:"typeorm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#typeorm"}},[e._v("#")]),e._v(" typeorm")]),e._v(" "),t("p",[e._v("基于Decorator的ORM框架，对TypeScript支持比较好，同时支持在JavaScript中通过手动声明使用，以及JSON方式的Entity配置声明")]),e._v(" "),t("ul",[t("li",[e._v("官网：https://github.com/typeorm/typeorm/")]),e._v(" "),t("li",[e._v("数据库： 支持关系行数据库，beta支持MongoDB")]),e._v(" "),t("li",[e._v("编程风格：")])]),e._v(" "),t("p",[e._v("基本上是Hibernate的js版本\n支持Promise/async/await\n支持基于链式构造的Query Builder查询\n支持CLI工具")]),e._v(" "),t("p",[e._v("热度： 周频更新， NPM周下载2.8w")]),e._v(" "),t("h2",{attrs:{id:"最终对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最终对比"}},[e._v("#")]),e._v(" 最终对比")]),e._v(" "),t("p",[e._v("从以上分析，我们最终从sequelize和bookshelfl两者之间作出选择。项目数据对比\n"),t("a",{attrs:{href:"https://nodejs.libhunt.com/compare-sequelize-vs-bookshelf",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://nodejs.libhunt.com/compare-sequelize-vs-bookshelf"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("依赖于sequelize的项目：")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.npmjs.com/browse/depended/sequelize",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/browse/depended/sequelize"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("依赖于bookshelf的项目：")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.npmjs.com/browse/depended/bookshelf",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/browse/depended/bookshelf"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("1W star 以上项目依赖：\nghost项目使用bookshelf\nreact-starter-kit项目使用sequelize")]),e._v(" "),t("p",[e._v("两者文档都很全面。sequelize的star数量和版本更新频率高于bookshelf，所以推荐使用Sequelize")])])}),[],!1,null,null,null);t.default=o.exports}}]);