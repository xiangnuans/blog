(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{586:function(a,s,e){"use strict";e.r(s);var t=e(2),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"ffprobe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffprobe"}},[a._v("#")]),a._v(" ffprobe")]),a._v(" "),s("h3",{attrs:{id:"查看媒体文件信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看媒体文件信息"}},[a._v("#")]),a._v(" 查看媒体文件信息")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffprobe 文件\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("先看一个音频文件：")]),a._v(" "),s("p",[a._v("从输出的内容我们可以看到音频文件的播放时长，开始播放时间，以及文件的比特率，第二行可以看出编码格式是mp3，采样率是444.1khz，这路流的比特率是320kb/s")]),a._v(" "),s("p",[a._v("接下来我们看一个视频文件")]),a._v(" "),s("p",[a._v("编码方式是H264，每一帧是YUV420P 的格式，分辨率是1440*810，每秒24帧。音频流编码方式是aac(封装格式是HE-AACv2)，采样率是44.1khz")]),a._v(" "),s("h3",{attrs:{id:"ffprobe输出格式信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffprobe输出格式信息"}},[a._v("#")]),a._v(" ffprobe输出格式信息")]),a._v(" "),s("ul",[s("li",[a._v("输出文件的格式信息（包括时长，文件爱你大小，格式信息等等）")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("ffprobe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-show_format")]),a._v(" 文件路径\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("以json格式输出每个流量详细的信息，例如视频宽高信息，是否有B帧，视频帧的总数目，编码格式，显示比例，音频的省道，编码格式等等。")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffprobe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print_format")]),a._v(" json "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-show_streams")]),a._v(" 文件路径\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("显示帧信息")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffprobe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-show_frames")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("查看包信息")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffprobe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-show_packets")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"ffplay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffplay"}},[a._v("#")]),a._v(" ffplay")]),a._v(" "),s("h3",{attrs:{id:"播放音视频文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#播放音视频文件"}},[a._v("#")]),a._v(" 播放音视频文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffplay "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("可以利用键盘方向键操作，W是绘制波形，按S键则进入frame-step模式，按一次就会展示下一帧的图像")]),a._v(" "),s("h3",{attrs:{id:"循环播放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#循环播放"}},[a._v("#")]),a._v(" 循环播放")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffplay "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-loop")]),a._v(" 循环次数\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"播放指定流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#播放指定流"}},[a._v("#")]),a._v(" 播放指定流")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("音频\nffplay 文件路径 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ast")]),a._v(" 流字数\n\n// 视频\nffplay 文件路径 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vst")]),a._v(" 流数字\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"播放数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#播放数据"}},[a._v("#")]),a._v(" 播放数据")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("音频\n\nffplay 原始文件（pcm文件） "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" 格式  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-channels")]),a._v(" 声道数 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ar")]),a._v(" 采样率\n\n视频\n\nffplay 原始格式（例如 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rawvideo） 格式（-pixel_format yuv420p） 宽高（例如-s "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("480")]),a._v("*480）\n\nRGB\nffplay "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rawvideo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pixel_format")]),a._v(" rgb24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("480")]),a._v("*480 texture.rgb\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("上面的参数必须设置正确，否则无法播放")]),a._v(" "),s("h3",{attrs:{id:"ffplay对齐方式-音画同步-的设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffplay对齐方式-音画同步-的设置"}},[a._v("#")]),a._v(" ffplay对齐方式（音画同步）的设置")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffpaly 文件路径 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sync")]),a._v(" audio // 以音频为基准\nffplay 文件路径 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sync")]),a._v(" video // 以视频为基准\nffplay 文件路径 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sync")]),a._v(" ext // 外部时钟\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"ffmpeg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg"}},[a._v("#")]),a._v(" ffmpeg")]),a._v(" "),s("h3",{attrs:{id:"通用参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用参数"}},[a._v("#")]),a._v(" 通用参数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("fmt")]),a._v(" 指定格式（音频或视频格式）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" filename "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("音频或视频格式"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" 覆盖已有文件\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" duration 记录时长\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fs")]),a._v(" limit_size 设置文件大小上限\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ss")]),a._v(" time_off 从指定的时间"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("开始， "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("hh:mm:ss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(".xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("的格式也支持\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" 代表按照帧率发送，作为推流工具一定要加入参数，否则，ffmpeg会按照最高速率向媒体服务器不停发送数据\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h3",{attrs:{id:"视频参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频参数"}},[a._v("#")]),a._v(" 视频参数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" 指定比特率（bit/s），似乎ffmpeg是自动VBR的，指定了就大概是平均比特率\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bitexact")]),a._v(" 使用标准比特率\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vb")]),a._v(" 指定视频比特率（bit/s）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vframes")]),a._v(" number 设置转换多少帧（frame）的视频\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" rate 帧速率（fps） （可以改，确认非标准帧率会导致音画不同步，所以只能设定为15或者29.97）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" size 指定分辨率\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aspect")]),a._v(" aspect 设置视频长宽比（4:3， "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(":9 or "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.3333")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.7777")]),a._v("）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-croptop")]),a._v(" size 设置顶部切除尺寸（in pixels）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cropbottom")]),a._v(" size 设置底部切除尺寸（in pixels）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cropleft")]),a._v(" size 设置左切除尺寸 （in pixels）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cropright")]),a._v(" size 设置右切除尺寸 （in pixels）\n- padtop size 设置顶部补齐尺寸（in pixels）\n- padbottom size 设置底部补齐尺寸（in pixels）\n- padleft size 设置左补齐尺寸（in pixels）\n- padright size 设置右补齐尺寸（in pixels）\n- padcolor color 补齐带颜色（000000-FFFFFF）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vn")]),a._v(" 取消视频\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" codec 强制使用codec编解码方式（‘copy’ to copy stream）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sameq")]),a._v(" 使用同样视频质量作为源（VBR）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pass")]),a._v(" n 选择处理遍数（1或者2）两遍编码非常有用\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-passlogfile")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" 选择两遍的记录文件名为file\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-newvideo")]),a._v(" 在现在的视频流后面加入新的视频流\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br")])]),s("h3",{attrs:{id:"高级视频选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高级视频选项"}},[a._v("#")]),a._v(" 高级视频选项")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pix_fmt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("format")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" pixel format, "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'list'")]),a._v(" as argument shows all the pixel formats supported\n- intra 仅适用帧内编码\n- qscale q 以"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("数值"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("质量为基础的VBR，取之0.01-255，约小质量越好\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-loop_input")]),a._v(" 设置输入流的循环次数（目前只对图像有效）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-loop_output")]),a._v(" 设置输出视频的循环次数，比如输出gif时设为0表示无限循环\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" int 设置图像组大小\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cutoff")]),a._v(" int 设置截止频率\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qmin")]),a._v(" int 设定最小质量， 与-qmax"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("设定最大质量"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("共用，比如-qmin "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qmax")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("31")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qmax")]),a._v(" int 设定最大质量，\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qdiff")]),a._v(" int 量化标度间最大偏差（VBR）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bf")]),a._v(" int 使用frames B帧，支持 mpeg1，mpeg2，mpeg4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("h3",{attrs:{id:"音频参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#音频参数"}},[a._v("#")]),a._v(" 音频参数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ab")]),a._v(" 设置比特率（单位：bit/s，也许老版是kb/s）前面-ac设为立体声时，要以一般比特率来设置，比如192kbps的就设为96，转换 默认比特率都比较小，要听到较高品质声音的话建议设到160kbps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("以上\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aframes")]),a._v(" number 设置转换多少帧（frame）的音频\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aq")]),a._v(" quality 设置音频质量（指定编码）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ar")]),a._v(" rate 设置音频采样率 （单位：Hz）,PSP 只认24000\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ac")]),a._v(" channels 设置声道数，1就是单声道，2就是立体声，转换单声道的TVrip可以用1（节省一般容量），高品质DVrip就可以用2\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" 取消音频\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" codec 指定音频编码\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vol")]),a._v(" volume 设置录制音量大小（默认256）"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("百分比"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("，某些DVDrip的AC3轨音量极小，转换时可以用这个提高音量，比如200就是原来的2倍\n- newaudio 在现在的音频流后面加入新的音频流\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("h3",{attrs:{id:"字幕参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字幕参数"}},[a._v("#")]),a._v(" 字幕参数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sn")]),a._v(" 取消字幕\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-scodec")]),a._v(" codec 设置字幕编码（‘copy’ to copy stream）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-newsubtitle")]),a._v(" 在当前字幕后新增\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-slang")]),a._v(" code 设置字幕所用的ISO "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("639")]),a._v(" 编码（3个字母）\n-Audio/Video 抓取选项\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vc")]),a._v(" channel 设置视频捕获通道（只对DV1394）\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tvstd")]),a._v(" standard 设置电视标准 NTSC PAL（SECAM）\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h2",{attrs:{id:"举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[a._v("#")]),a._v(" 举例：")]),a._v(" "),s("h3",{attrs:{id:"列出ffmpeg支持的所有格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#列出ffmpeg支持的所有格式"}},[a._v("#")]),a._v(" 列出ffmpeg支持的所有格式")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-formats")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"剪切一段媒体文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#剪切一段媒体文件"}},[a._v("#")]),a._v(" 剪切一段媒体文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ss")]),a._v(" 00:00:50.0 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-codec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(" output,mp4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"将文件从50秒开始剪切20秒-输入到新文件-ss是指定时间-t是指定时长-提取一个视频中的音频文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将文件从50秒开始剪切20秒-输入到新文件-ss是指定时间-t是指定时长-提取一个视频中的音频文件"}},[a._v("#")]),a._v(" 将文件从50秒开始剪切20秒,输入到新文件,-ss是指定时间,-t是指定时长，提取一个视频中的音频文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" copy output.m4a\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"使一个视频中的音频静音"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使一个视频中的音频静音"}},[a._v("#")]),a._v(" 使一个视频中的音频静音")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" copy output.mp4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"从mp4文件中到处h264裸流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从mp4文件中到处h264裸流"}},[a._v("#")]),a._v(" 从MP4文件中到处H264裸流")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" output.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bsf:v")]),a._v(" h264_mp4toannexb output.h264\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"使用aac和h264文件生成mp4文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用aac和h264文件生成mp4文件"}},[a._v("#")]),a._v(" 使用aac和h264文件生成mp4文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.aac "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.h264 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-bsf:a")]),a._v(" aac_adtstoasc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" mp4 output.mp4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"对音频文件的编码做转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对音频文件的编码做转换"}},[a._v("#")]),a._v(" 对音频文件的编码做转换")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.wav "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" libfdk_aac output.aac\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"从wav文件导出pcm裸数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从wav文件导出pcm裸数据"}},[a._v("#")]),a._v(" 从wav文件导出pcm裸数据")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.wav "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" pcm_s16le "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" s16le output.pcm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"将mp4导出为gif-参数设置为宽度100-帧率10-只处理前五秒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将mp4导出为gif-参数设置为宽度100-帧率10-只处理前五秒"}},[a._v("#")]),a._v(" 将mp4导出为gif,参数设置为宽度100,帧率10,只处理前五秒")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vf")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("sacle")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(":-1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" output.gif\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"将视频画面生成图片-参数为每四秒截取一张-生成缩略图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将视频画面生成图片-参数为每四秒截取一张-生成缩略图"}},[a._v("#")]),a._v(" 将视频画面生成图片,参数为每四秒截取一张,生成缩略图")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.25")]),a._v(" frames_%04d.png\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"将两路声音合并-例如添加背景音乐-输出时间是以较短的为准"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将两路声音合并-例如添加背景音乐-输出时间是以较短的为准"}},[a._v("#")]),a._v(" 将两路声音合并,例如添加背景音乐,输出时间是以较短的为准")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.wav "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" bgm.wav "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filter_complex")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("amix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("inputs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(":deration"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("shortest output.wav\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"视频添加水印-视频宽度为100-水印宽度为20"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频添加水印-视频宽度为100-水印宽度为20"}},[a._v("#")]),a._v(" 视频添加水印,视频宽度为100,水印宽度为20")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" image.png "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filter_complex")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[0:v][1:v]overlay=100-20-10:10:1[out]'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-map")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[out]'")]),a._v(" output.mp4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"将视频推送到流媒体服务器-re表示实际速度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将视频推送到流媒体服务器-re表示实际速度"}},[a._v("#")]),a._v(" 将视频推送到流媒体服务器(-re表示实际速度)")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" copy-vcodec copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" flv rtmp://xxx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"将流媒体服务器的流dump到本地"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将流媒体服务器的流dump到本地"}},[a._v("#")]),a._v(" 将流媒体服务器的流dump到本地")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ffmpeg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" http://xxx.flv "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" copy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" flv output.flv\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);